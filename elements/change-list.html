<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="change-list">
  <template>
    <iron-ajax
        auto
        url="/data.json"
        params='{}'
        handle-as="text"
        on-response="handleResponse"
        debounce-duration="300"></iron-ajax>
    <template is="dom-repeat" items="[[changes]]" as="change">
      <div>[[change.change_id]]</div>
    </template>

  </template>
  <script>
    Polymer({
      is: "change-list",

      handleResponse: function(e, req) {
        console.log(arguments)
        console.log(req.response);
        this.changes = JSON.parse(req.response.substring(')]}\''.length));
      }
    });
  </script>
</dom-module>
